name:			switch

compiler:		%ccompiler

os:				%platform

posix:			%list
posix.contents:	[posix.c]
posix.depends:	[$(os.posix)]

windows:		%list
windows.contents:[windows.c]
windows.depends:[$(os.windows)]

generic:		%list
generic.contents:[generic.c]
generic.conflicts:[$(os.windows) $(os.posix)]

os-info:		%switch
os-info.options:[$(windows) $(posix) $(generic)]

test:			%program
test.src:		[main.c $(os-info)]
test.compiler:	$(compiler)
